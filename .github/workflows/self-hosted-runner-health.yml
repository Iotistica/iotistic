name: Self-Hosted Runner Health Check

on:
  workflow_dispatch:

jobs:
  runner-health:
    name: Check Self-Hosted Runner Health
    runs-on: [self-hosted, iotistic-lab-sc]
    steps:
      - name: Print runner info
        run: |
          echo "Runner name: ${{ runner.name }}"
          echo "Runner OS: ${{ runner.os }}"
          echo "Runner architecture: ${{ runner.arch }}"

      - name: Check Docker
        run: |
          docker --version || echo "Docker not installed"
          docker info || echo "Docker info unavailable"

      - name: Check Git
        run: |
          git --version || echo "Git not installed"

      - name: List installed packages (Docker)
        run: |
          docker images || echo "No Docker images found"

      - name: Print environment variables
        run: |
          printenv | sort
